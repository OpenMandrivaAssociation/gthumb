From d3be016d5a139f54328cc54eff5443b2afca8064 Mon Sep 17 00:00:00 2001
From: Paolo Bacchilega <paobac@src.gnome.org>
Date: Tue, 29 Aug 2023 07:37:55 +0200
Subject: [PATCH] Moved declaration to the beginning of the block

Fixes https://gitlab.gnome.org/GNOME/gthumb/-/issues/292
---
 gthumb/gth-browser.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/gthumb/gth-browser.c b/gthumb/gth-browser.c
index c767dd59..a96a7d57 100644
--- a/gthumb/gth-browser.c
+++ b/gthumb/gth-browser.c
@@ -4440,7 +4440,8 @@ static gboolean
 browser_key_press_cb (GthBrowser  *browser,
 		      GdkEventKey *event)
 {
-	gboolean result = FALSE;
+	gboolean   result = FALSE;
+	GtkWidget *focus_widget;
 
 	event->keyval = gth_shortcut_normalize_keycode (event->keyval);
 
@@ -4453,7 +4454,7 @@ browser_key_press_cb (GthBrowser  *browser,
 		break;
 
 	case GTH_BROWSER_PAGE_BROWSER:
-		GtkWidget *focus_widget = gtk_window_get_focus (GTK_WINDOW (browser));
+		focus_widget = gtk_window_get_focus (GTK_WINDOW (browser));
 		if (! GTK_IS_ENTRY (focus_widget) && ! GTK_IS_TREE_VIEW (focus_widget))
 			result = gth_browser_file_list_key_press_cb (browser, event);
 		break;
-- 
GitLab
